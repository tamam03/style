
 <div class="container">
  <div class="d-flex justify-content-center">
   <div class="row">
    <div class="title col-12 p-3">
     <h2>新規会員登録</h2>
    </div>
      <%= form_with model: @user, url: user_registration_path, method: :post do |f| %>
    <div class="error-messages col-12">
     <%= render "public/shared/error_messages", resource: resource %>
    </div>
    <div class="switch-form col-12 p-2">
     <%= f.label :is_user, "ユーザー", :value => "true" %>
     <%= f.radio_button :is_user, true, :checked => true, :class => "radio-button" %>
     <%= f.label :is_user, "店舗スタッフ", :value => "false" %>
     <%= f.radio_button :is_user, false, :class => "radio-button" %>
    </div>
    <div class="registration-form col-12">
     <%= render "public/registrations/new", f: f %>
    </div>
     <% end %>
    <div class="link col-12 mt-3">
     <%= render "public/shared/links" %>
    </div>
   </div>
  </div>
 </div>

<!--ラジオボタンでフォーム切り替え-->
 <script>
  function switchForm(){
   const isUser = $('input:radio[name="user[is_user]"]:checked').val() === 'true';
    if (isUser) {
     $('#only-clerk').hide();
     $('#only-customer').show();
    } else {
     $('#only-clerk').show();
     $('#only-customer').hide();
    }
  }
  $(function() {
   switchForm()
  })
  $('.radio-button').click(function() {
   switchForm()
  })
 </script>

 <script>
  $(document).on 'change', '#user_brand_id', ->
  $.ajax(
    type: 'GET'
    url: '/profiles/get_stores'
    data: {
      brand_id: $(this).val()
    }
  ).done (data) ->
    $('.store-field').html(data)
 </script>

